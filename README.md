# 顔認識アプリケーション

## 概要
このアプリケーションは、GITY内に設置されたIPカメラを使用してリアルタイムの顔認識機能を提供します。システムは顔を検出し、既知の個人と照合して、セキュリティ監視のために未知の顔を記録します。

## システムの特徴
- リアルタイムの顔検出と認識
- 複数のIPカメラに対応
- パフォーマンス向上のための顔エンコーディングのキャッシング
- 未知の顔の自動記録
- 未知の顔ログの日次管理
- 重複を削除するための未知の顔間の類似性比較

## 動作の仕組み

### 顔認識プロセス
1. システムは `images/` ディレクトリから既知の顔エンコーディングを読み込みます
2. 顔エンコーディングはパフォーマンス向上のためにキャッシュされます
3. アプリケーションはIPカメラに接続してフレームをキャプチャします
4. 各フレームで顔が検出され、既知の顔と比較されます
5. 未知の顔は `unknown_faces/` ディレクトリに保存されます

### 未知の顔の管理
- 未知の顔は自動的に検出・保存されます
- 保存間隔の最小値（30秒）を設けることで、重複エントリを防止します
- 毎日の終わりに、未知の顔はアーカイブフォルダに移動されます
- システムはアーカイブされた顔を分析して、類似の重複を削除します

## 主要コンポーネント

### FaceEncodingCache
パフォーマンス向上のための顔エンコーディングのキャッシングを管理します：
- 顔画像の変更を追跡するためにMD5ハッシュを使用
- 画像が変更されたときに自動的にキャッシュを更新
- 古いキャッシュファイルのクリーンアップ

### FaceRecognitionProcessor
核となる顔認識ロジックを処理します：
- IPカメラからフレームをキャプチャ
- 顔の検出と識別
- 未知の顔の保存管理
- 顔の境界ボックス付きの視覚的出力の提供

### UnknownFinder
カメラ全体で未知の顔を検出します：
- 設定されたカメラからのフレームを処理
- 未知の顔データの日次アーカイブを処理
